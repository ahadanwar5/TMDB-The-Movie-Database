{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import React,{useRef,useEffect,useState}from\"react\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Animated from\"react-native-web/dist/exports/Animated\";import Easing from\"react-native-web/dist/exports/Easing\";import StarIcon from\"./StarIcon\";import{getStars}from\"./utils\";var defaultColor=\"#fdd835\";var defaultAnimationConfig={easing:Easing.elastic(2),duration:300,scale:1.2,delay:300};var StarRating=function StarRating(_ref){var rating=_ref.rating,_ref$maxStars=_ref.maxStars,maxStars=_ref$maxStars===void 0?5:_ref$maxStars,_ref$starSize=_ref.starSize,starSize=_ref$starSize===void 0?32:_ref$starSize,onChange=_ref.onChange,_ref$color=_ref.color,color=_ref$color===void 0?defaultColor:_ref$color,_ref$emptyColor=_ref.emptyColor,emptyColor=_ref$emptyColor===void 0?color:_ref$emptyColor,_ref$enableHalfStar=_ref.enableHalfStar,enableHalfStar=_ref$enableHalfStar===void 0?true:_ref$enableHalfStar,_ref$enableSwiping=_ref.enableSwiping,enableSwiping=_ref$enableSwiping===void 0?true:_ref$enableSwiping,_ref$animationConfig=_ref.animationConfig,animationConfig=_ref$animationConfig===void 0?defaultAnimationConfig:_ref$animationConfig,style=_ref.style,starStyle=_ref.starStyle,testID=_ref.testID;var width=useRef();var ref=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isInteracting=_useState2[0],setInteracting=_useState2[1];var handleInteraction=function handleInteraction(x){if(width.current){var newRating=Math.max(0,Math.min(Math.round(x/width.current*maxStars*2+0.2)/2,maxStars));onChange(enableHalfStar?newRating:Math.ceil(newRating));}};var _useState3=useState(function(){return PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onStartShouldSetPanResponderCapture:function onStartShouldSetPanResponderCapture(){return true;},onMoveShouldSetPanResponder:function onMoveShouldSetPanResponder(){return true;},onMoveShouldSetPanResponderCapture:function onMoveShouldSetPanResponderCapture(){return true;},onPanResponderMove:function onPanResponderMove(e){if(enableSwiping){handleInteraction(e.nativeEvent.locationX);}},onPanResponderStart:function onPanResponderStart(e){handleInteraction(e.nativeEvent.locationX);setInteracting(true);},onPanResponderEnd:function onPanResponderEnd(){setTimeout(function(){setInteracting(false);},animationConfig.delay||defaultAnimationConfig.delay);}});}),_useState4=_slicedToArray(_useState3,1),panResponder=_useState4[0];return React.createElement(View,_extends({ref:ref,style:[styles.starRating,style]},panResponder.panHandlers,{onLayout:function onLayout(){if(ref.current){ref.current.measure(function(_x,_y,w,_h){return width.current=w;});}},testID:testID}),getStars(rating,maxStars).map(function(starType,i){return React.createElement(AnimatedIcon,{key:i,active:isInteracting&&rating-i>=0.5,animationConfig:animationConfig,style:starStyle},React.createElement(StarIcon,{type:starType,size:starSize,color:starType===\"empty\"?emptyColor:color}));}));};var AnimatedIcon=function AnimatedIcon(_ref2){var active=_ref2.active,animationConfig=_ref2.animationConfig,children=_ref2.children,style=_ref2.style;var _animationConfig$scal=animationConfig.scale,scale=_animationConfig$scal===void 0?defaultAnimationConfig.scale:_animationConfig$scal,_animationConfig$easi=animationConfig.easing,easing=_animationConfig$easi===void 0?defaultAnimationConfig.easing:_animationConfig$easi,_animationConfig$dura=animationConfig.duration,duration=_animationConfig$dura===void 0?defaultAnimationConfig.duration:_animationConfig$dura;var animatedSize=useRef(new Animated.Value(active?scale:1));useEffect(function(){var animation=Animated.timing(animatedSize.current,{toValue:active?scale:1,useNativeDriver:true,easing:easing,duration:duration});animation.start();return animation.stop;},[active,scale,easing,duration]);return React.createElement(Animated.View,{pointerEvents:\"none\",style:[styles.star,style,{transform:[{scale:animatedSize.current}]}]},children);};var styles=StyleSheet.create({starRating:{flexDirection:\"row\",alignSelf:\"flex-start\"},star:{marginHorizontal:5}});export default StarRating;","map":{"version":3,"names":["React","useRef","useEffect","useState","PanResponder","StyleSheet","View","Animated","Easing","StarIcon","getStars","defaultColor","defaultAnimationConfig","easing","elastic","duration","scale","delay","StarRating","_ref","rating","_ref$maxStars","maxStars","_ref$starSize","starSize","onChange","_ref$color","color","_ref$emptyColor","emptyColor","_ref$enableHalfStar","enableHalfStar","_ref$enableSwiping","enableSwiping","_ref$animationConfig","animationConfig","style","starStyle","testID","width","ref","_useState","_useState2","_slicedToArray","isInteracting","setInteracting","handleInteraction","x","current","newRating","Math","max","min","round","ceil","_useState3","create","onStartShouldSetPanResponder","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderMove","e","nativeEvent","locationX","onPanResponderStart","onPanResponderEnd","setTimeout","_useState4","panResponder","createElement","_extends","styles","starRating","panHandlers","onLayout","measure","_x","_y","w","_h","map","starType","i","AnimatedIcon","key","active","type","size","_ref2","children","_animationConfig$scal","_animationConfig$easi","_animationConfig$dura","animatedSize","Value","animation","timing","toValue","useNativeDriver","start","stop","pointerEvents","star","transform","flexDirection","alignSelf","marginHorizontal"],"sources":["/Users/ahadanwar/Desktop/tmdb/node_modules/react-native-star-rating-widget/lib/module/StarRating.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport {\n    PanResponder,\n    StyleSheet,\n    View,\n    StyleProp,\n    ViewStyle,\n    Animated,\n    Easing,\n} from \"react-native\";\nimport StarIcon from \"./StarIcon\";\nimport { getStars } from \"./utils\";\n\ntype AnimationConfig = {\n    easing?: (value: number) => number;\n    duration?: number;\n    delay?: number;\n    scale?: number;\n};\n\ntype StarRatingProps = {\n    rating: number;\n    onChange: (rating: number) => void;\n    minRating?: number;\n    color?: string;\n    emptyColor?: string;\n    maxStars?: number;\n    starSize?: number;\n    enableHalfStar?: boolean;\n    enableSwiping?: boolean;\n    style?: StyleProp<ViewStyle>;\n    starStyle?: StyleProp<ViewStyle>;\n    animationConfig?: AnimationConfig;\n    testID?: string;\n};\n\nconst defaultColor = \"#fdd835\";\nconst defaultAnimationConfig: Required<AnimationConfig> = {\n    easing: Easing.elastic(2),\n    duration: 300,\n    scale: 1.2,\n    delay: 300,\n};\n\nconst StarRating: React.FC<StarRatingProps> = ({\n    rating,\n    maxStars = 5,\n    starSize = 32,\n    onChange,\n    color = defaultColor,\n    emptyColor = color,\n    enableHalfStar = true,\n    enableSwiping = true,\n    animationConfig = defaultAnimationConfig,\n    style,\n    starStyle,\n    testID,\n}) => {\n    const width = useRef<number>();\n    const ref = useRef<View>(null);\n    const [isInteracting, setInteracting] = useState(false);\n\n    const handleInteraction = (x: number) => {\n        if (width.current) {\n            const newRating = Math.max(\n                0,\n                Math.min(\n                    Math.round((x / width.current) * maxStars * 2 + 0.2) / 2,\n                    maxStars\n                )\n            );\n            onChange(enableHalfStar ? newRating : Math.ceil(newRating));\n        }\n    };\n\n    const [panResponder] = useState(() =>\n        PanResponder.create({\n            onStartShouldSetPanResponder: () => true,\n            onStartShouldSetPanResponderCapture: () => true,\n            onMoveShouldSetPanResponder: () => true,\n            onMoveShouldSetPanResponderCapture: () => true,\n            onPanResponderMove: e => {\n                if (enableSwiping) {\n                    handleInteraction(e.nativeEvent.locationX);\n                }\n            },\n            onPanResponderStart: e => {\n                handleInteraction(e.nativeEvent.locationX);\n                setInteracting(true);\n            },\n            onPanResponderEnd: () => {\n                setTimeout(() => {\n                    setInteracting(false);\n                }, animationConfig.delay || defaultAnimationConfig.delay);\n            },\n        })\n    );\n\n    return (\n        <View\n            ref={ref}\n            style={[styles.starRating, style]}\n            {...panResponder.panHandlers}\n            onLayout={() => {\n                if (ref.current) {\n                    ref.current.measure((_x, _y, w, _h) => (width.current = w));\n                }\n            }}\n            testID={testID}>\n            {getStars(rating, maxStars).map((starType, i) => {\n                return (\n                    <AnimatedIcon\n                        key={i}\n                        active={isInteracting && rating - i >= 0.5}\n                        animationConfig={animationConfig}\n                        style={starStyle}>\n                        <StarIcon\n                            type={starType}\n                            size={starSize}\n                            color={starType === \"empty\" ? emptyColor : color}\n                        />\n                    </AnimatedIcon>\n                );\n            })}\n        </View>\n    );\n};\n\ntype AnimatedIconProps = {\n    active: boolean;\n    children: React.ReactElement;\n    animationConfig: AnimationConfig;\n    style?: StyleProp<ViewStyle>;\n};\n\nconst AnimatedIcon: React.FC<AnimatedIconProps> = ({\n    active,\n    animationConfig,\n    children,\n    style,\n}) => {\n    const {\n        scale = defaultAnimationConfig.scale,\n        easing = defaultAnimationConfig.easing,\n        duration = defaultAnimationConfig.duration,\n    } = animationConfig;\n\n    const animatedSize = useRef(new Animated.Value(active ? scale : 1));\n\n    useEffect(() => {\n        const animation = Animated.timing(animatedSize.current, {\n            toValue: active ? scale : 1,\n            useNativeDriver: true,\n            easing,\n            duration,\n        });\n\n        animation.start();\n        return animation.stop;\n    }, [active, scale, easing, duration]);\n\n    return (\n        <Animated.View\n            pointerEvents=\"none\"\n            style={[\n                styles.star,\n                style,\n                {\n                    transform: [\n                        {\n                            scale: animatedSize.current,\n                        },\n                    ],\n                },\n            ]}>\n            {children}\n        </Animated.View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    starRating: {\n        flexDirection: \"row\",\n        alignSelf: \"flex-start\",\n    },\n    star: {\n        marginHorizontal: 5,\n    },\n});\n\nexport default StarRating;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}